<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
<h:head>
	<title>Team Creation</title>
	<link rel="stylesheet" type="text/css" href="css/navbar.css"></link>
</h:head>      
<body>
	<nav>
		<div class="wrapper">
			<div class="logo">
				<a href="#">ADMIN</a>
			</div>
			<input type="radio" name="slider" id="menu-btn"></input> <input
				type="radio" name="slider" id="close-btn"></input>
			<ul class="nav-links">
				<label for="close-btn" class="btn close-btn"><i
					class="fas fa-times"></i></label>
				<li><a href="home.xhtml">Home</a></li>
				<li><a href="student_list.xhtml">Student Management</a></li>
				<li><a href="team.xhtml" class="desktop-item">Team Management</a></li>
				<li><a href="#" class="desktop-item">Projects</a> <input
					type="checkbox" id="showDrop"></input> <label for="showDrop"
					class="mobile-item">Projects</label>
					<ul class="drop-menu">
						<li><a href="projects_creation.xhtml">Projects Creation</a></li>
						<li><a href="submission_track.xhtml">Submission Track</a></li>
					</ul></li>
				<li><a href="#">Configuration</a></li>
				<li><a href="archiving.xhtml">Archiving</a></li>
			</ul>
			<label for="menu-btn" class="btn menu-btn"><i
				class="fas fa-bars"></i></label>
		</div>
	</nav>
</body>
<h:body>
    <div class="body">
        <div class="card crud-demo">
            <h:form id="form">
                <p:growl id="messages" showDetail="true" />

                <p:toolbar>
                    <p:toolbarGroup>
                        <p:commandButton value="New Team" icon="pi pi-plus" actionListener="#{teamView.openNew}"
                                         update=":dialogs:manage-team-content" oncomplete="PF('manageTeamDialog').show()"
                                         styleClass="ui-button-success" />
                    </p:toolbarGroup>
                </p:toolbar>

				<p:dataTable id="dt-teams" widgetVar="dtTeams" var="team"
				             value="#{teamView.teams}" reflow="true"
				             styleClass="teams-table"
				             selection="#{teamView.selectedTeams}" rowKey="#{team.id}"
				             paginator="true" rows="10" rowSelectMode="add"
				             paginatorPosition="bottom">
				    <f:facet name="header">
				        <div class="teams-table-header">
				            <span style="font-weight: bold">TEAMS</span>
				            <span class="filter-container ui-input-icon-left">
				                <i class="pi pi-search"></i>
				                <p:inputText id="globalFilter" onkeyup="PF('dtTeams').filter()" placeholder="Search" />
				            </span>
				        </div>
				    </f:facet>
				
				    <p:ajax event="rowSelect"
				            update=":form:delete-teams-button, :form:edit-team-button" />
				    <p:ajax event="rowUnselect"
				            update=":form:delete-teams-button, :form:edit-team-button" />
				    <p:ajax event="rowSelectCheckbox"
				            update=":form:delete-teams-button, :form:edit-team-button" />
				    <p:ajax event="rowUnselectCheckbox"
				            update=":form:delete-teams-button, :form:edit-team-button" />
				    <p:ajax event="toggleSelect"
				            update=":form:delete-teams-button, :form:edit-team-button" />
				
				    <p:column selectionMode="multiple" exportable="false"></p:column>
				    <p:column headerText="Name" sortBy="#{team.name}"
				              filterBy="#{team.name}">
				        <h:outputText value="#{team.name}" />
				    </p:column>
				    <p:column headerText="Description" sortBy="#{team.description}"
				              filterBy="#{team.description}">
				        <h:outputText value="#{team.description}" />
				    </p:column>
				    <p:column headerText="Members">
				        <h:outputText value="#{team.getTeamsList()}" />
				    </p:column>
				</p:dataTable>
            </h:form>

            <h:form id="dialogs">
                <p:dialog header="Team Details" widgetVar="manageTeamDialog" modal="true" dynamic="true">
                    <p:outputPanel id="manage-team-content">
                        <p:outputPanel rendered="#{not empty teamView.selectedTeam}">
                            <div class="field">
                                <p:outputLabel for="teamName">Name</p:outputLabel>
                                <p:inputText id="teamName" value="#{teamView.selectedTeam.name}" required="true" />
                            </div>
                            <div class="field">
                                <p:outputLabel for="teamDescription">Description</p:outputLabel>
                                <p:inputTextarea id="teamDescription" value="#{teamView.selectedTeam.description}" />
                            </div>
                            <div class="field">
                                <p:outputLabel for="teamMembers">Team Members</p:outputLabel>
                                <p:pickList value="#{teamView.teamMembers}" var="student" 
                                            itemLabel="#{student.name}" itemValue="#{student}" 
                                            converter="studentConverter">
                                    <f:facet name="sourceCaption">Available Students</f:facet>
                                    <f:facet name="targetCaption">Selected Members</f:facet>
                                </p:pickList>
                            </div>
                        </p:outputPanel>
                    </p:outputPanel>

                    <f:facet name="footer">
                        <p:commandButton value="Save" icon="pi pi-check" actionListener="#{teamView.saveTeam}"
                                         update=":form:dtTeams" oncomplete="PF('manageTeamDialog').hide()" />
                        <p:commandButton value="Cancel" icon="pi pi-times"
                                         onclick="PF('manageTeamDialog').hide()" type="button" />
                    </f:facet>
                </p:dialog>
            </h:form>
        </div>
    </div>
</h:body>
</html>